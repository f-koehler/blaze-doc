<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Matrix Types</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../Blaze.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../blaze.jpg"/></td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Matrix Types </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#matrix_types_static_matrix">StaticMatrix</a></li>
<li class="level1"><a href="#matrix_types_dynamic_matrix">DynamicMatrix</a></li>
<li class="level1"><a href="#matrix_types_hybrid_matrix">HybridMatrix</a></li>
<li class="level1"><a href="#matrix_types_custom_matrix">CustomMatrix</a><ul><li class="level2"><a href="#matrix_types_custom_matrix_memory_management">Memory Management</a></li>
<li class="level2"><a href="#matrix_types_custom_matrix_copy_operations">Copy Operations</a></li>
<li class="level2"><a href="#matrix_types_custom_matrix_alignment">Alignment</a></li>
<li class="level2"><a href="#matrix_types_custom_matrix_padding">Padding</a></li>
</ul>
</li>
<li class="level1"><a href="#matrix_types_compressed_matrix">CompressedMatrix</a></li>
</ul>
</div>
<div class="textblock"><p><br />
 </p>
<h1><a class="anchor" id="matrix_types_static_matrix"></a>
StaticMatrix</h1>
<hr/>
<p>The <a class="el" href="../../d3/dd3/classblaze_1_1StaticMatrix.html" title="Efficient implementation of a fixed-sized matrix.The StaticMatrix class template is the representatio...">blaze::StaticMatrix</a> class template is the representation of a fixed size matrix with statically allocated elements of arbitrary type. It can be included via the header file</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="../../dc/db4/StaticMatrix_8h.html">blaze/math/StaticMatrix.h</a>&gt;</span></div></div><!-- fragment --><p>The type of the elements, the number of rows and columns, and the storage order of the matrix can be specified via the four template parameters:</p>
<div class="fragment"><div class="line"><span class="keyword">template</span>&lt; <span class="keyword">typename</span> Type, <span class="keywordtype">size_t</span> M, <span class="keywordtype">size_t</span> N, <span class="keywordtype">bool</span> SO &gt;</div><div class="line"><span class="keyword">class </span>StaticMatrix;</div></div><!-- fragment --><ul>
<li><code>Type:</code> specifies the type of the matrix elements. StaticMatrix can be used with any non-cv-qualified, non-reference element type.</li>
<li><code>M</code> : specifies the total number of rows of the matrix.</li>
<li><code>N</code> : specifies the total number of columns of the matrix. Note that it is expected that StaticMatrix is only used for tiny and small matrices.</li>
<li><code>SO</code> : specifies the storage order (<a class="el" href="../../d2/de9/namespaceblaze.html#a511878ce70095271b6d0dd5b855a9eaa" title="Storage order flag for row-major matrices. ">blaze::rowMajor</a>, <a class="el" href="../../d2/de9/namespaceblaze.html#a5e42e1508f7d4d364fe7c64eef78a583" title="Storage order flag for column-major matrices. ">blaze::columnMajor</a>) of the matrix. The default value is <a class="el" href="../../d2/de9/namespaceblaze.html#a511878ce70095271b6d0dd5b855a9eaa" title="Storage order flag for row-major matrices. ">blaze::rowMajor</a>.</li>
</ul>
<p>The <a class="el" href="../../d3/dd3/classblaze_1_1StaticMatrix.html" title="Efficient implementation of a fixed-sized matrix.The StaticMatrix class template is the representatio...">blaze::StaticMatrix</a> is perfectly suited for small to medium matrices whose dimensions are known at compile time:</p>
<div class="fragment"><div class="line"><span class="comment">// Definition of a 3x4 integral row-major matrix</span></div><div class="line"><a class="code" href="../../d3/dd3/classblaze_1_1StaticMatrix.html">blaze::StaticMatrix&lt;int,3UL,4UL&gt;</a> A;</div><div class="line"></div><div class="line"><span class="comment">// Definition of a 4x6 single precision row-major matrix</span></div><div class="line"><a class="code" href="../../d3/dd3/classblaze_1_1StaticMatrix.html">blaze::StaticMatrix&lt;float,4UL,6UL,blaze::rowMajor&gt;</a> B;</div><div class="line"></div><div class="line"><span class="comment">// Definition of a 6x4 double precision column-major matrix</span></div><div class="line"><a class="code" href="../../d3/dd3/classblaze_1_1StaticMatrix.html">blaze::StaticMatrix&lt;double,6UL,4UL,blaze::columnMajor&gt;</a> C;</div></div><!-- fragment --><p><br />
 </p>
<h1><a class="anchor" id="matrix_types_dynamic_matrix"></a>
DynamicMatrix</h1>
<hr/>
<p>The <a class="el" href="../../de/d1e/classblaze_1_1DynamicMatrix.html" title="Efficient implementation of a dynamic  matrix.The DynamicMatrix class template is the representation ...">blaze::DynamicMatrix</a> class template is the representation of an arbitrary sized matrix with <img class="formulaInl" alt="$ M \cdot N $" src="../../form_164.png"/> dynamically allocated elements of arbitrary type. It can be included via the header file</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="../../d0/d73/DynamicMatrix_8h.html">blaze/math/DynamicMatrix.h</a>&gt;</span></div></div><!-- fragment --><p>The type of the elements and the storage order of the matrix can be specified via the two template parameters:</p>
<div class="fragment"><div class="line"><span class="keyword">template</span>&lt; <span class="keyword">typename</span> Type, <span class="keywordtype">bool</span> SO &gt;</div><div class="line"><span class="keyword">class </span>DynamicMatrix;</div></div><!-- fragment --><ul>
<li><code>Type:</code> specifies the type of the matrix elements. DynamicMatrix can be used with any non-cv-qualified, non-reference element type.</li>
<li><code>SO</code> : specifies the storage order (<a class="el" href="../../d2/de9/namespaceblaze.html#a511878ce70095271b6d0dd5b855a9eaa" title="Storage order flag for row-major matrices. ">blaze::rowMajor</a>, <a class="el" href="../../d2/de9/namespaceblaze.html#a5e42e1508f7d4d364fe7c64eef78a583" title="Storage order flag for column-major matrices. ">blaze::columnMajor</a>) of the matrix. The default value is <a class="el" href="../../d2/de9/namespaceblaze.html#a511878ce70095271b6d0dd5b855a9eaa" title="Storage order flag for row-major matrices. ">blaze::rowMajor</a>.</li>
</ul>
<p>The <a class="el" href="../../de/d1e/classblaze_1_1DynamicMatrix.html" title="Efficient implementation of a dynamic  matrix.The DynamicMatrix class template is the representation ...">blaze::DynamicMatrix</a> is the default choice for all kinds of dense matrices and the best choice for medium to large matrices. The number of rows and columns can be modified at runtime:</p>
<div class="fragment"><div class="line"><span class="comment">// Definition of a 3x4 integral row-major matrix</span></div><div class="line"><a class="code" href="../../de/d1e/classblaze_1_1DynamicMatrix.html">blaze::DynamicMatrix&lt;int&gt;</a> A( 3UL, 4UL );</div><div class="line"></div><div class="line"><span class="comment">// Definition of a 4x6 single precision row-major matrix</span></div><div class="line"><a class="code" href="../../de/d1e/classblaze_1_1DynamicMatrix.html">blaze::DynamicMatrix&lt;float,blaze::rowMajor&gt;</a> B( 4UL, 6UL );</div><div class="line"></div><div class="line"><span class="comment">// Definition of a double precision column-major matrix with 0 rows and columns</span></div><div class="line"><a class="code" href="../../de/d1e/classblaze_1_1DynamicMatrix.html">blaze::DynamicMatrix&lt;double,blaze::columnMajor&gt;</a> C;</div></div><!-- fragment --><p><br />
 </p>
<h1><a class="anchor" id="matrix_types_hybrid_matrix"></a>
HybridMatrix</h1>
<hr/>
<p>The HybridMatrix class template combines the flexibility of a dynamically sized matrix with the efficiency and performance of a fixed size matrix. It is implemented as a crossing between the <a class="el" href="../../d3/dd3/classblaze_1_1StaticMatrix.html" title="Efficient implementation of a fixed-sized matrix.The StaticMatrix class template is the representatio...">blaze::StaticMatrix</a> and the <a class="el" href="../../de/d1e/classblaze_1_1DynamicMatrix.html" title="Efficient implementation of a dynamic  matrix.The DynamicMatrix class template is the representation ...">blaze::DynamicMatrix</a> class templates: Similar to the static matrix it uses static stack memory instead of dynamically allocated memory and similar to the dynamic matrix it can be resized (within the extend of the static memory). It can be included via the header file</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="../../d3/d3c/HybridMatrix_8h.html">blaze/math/HybridMatrix.h</a>&gt;</span></div></div><!-- fragment --><p>The type of the elements, the maximum number of rows and columns and the storage order of the matrix can be specified via the four template parameters:</p>
<div class="fragment"><div class="line"><span class="keyword">template</span>&lt; <span class="keyword">typename</span> Type, <span class="keywordtype">size_t</span> M, <span class="keywordtype">size_t</span> N, <span class="keywordtype">bool</span> SO &gt;</div><div class="line"><span class="keyword">class </span>HybridMatrix;</div></div><!-- fragment --><ul>
<li>Type: specifies the type of the matrix elements. HybridMatrix can be used with any non-cv-qualified, non-reference, non-pointer element type.</li>
<li>M : specifies the maximum number of rows of the matrix.</li>
<li>N : specifies the maximum number of columns of the matrix. Note that it is expected that HybridMatrix is only used for tiny and small matrices.</li>
<li>SO : specifies the storage order (<a class="el" href="../../d2/de9/namespaceblaze.html#a511878ce70095271b6d0dd5b855a9eaa" title="Storage order flag for row-major matrices. ">blaze::rowMajor</a>, <a class="el" href="../../d2/de9/namespaceblaze.html#a5e42e1508f7d4d364fe7c64eef78a583" title="Storage order flag for column-major matrices. ">blaze::columnMajor</a>) of the matrix. The default value is <a class="el" href="../../d2/de9/namespaceblaze.html#a511878ce70095271b6d0dd5b855a9eaa" title="Storage order flag for row-major matrices. ">blaze::rowMajor</a>.</li>
</ul>
<p>The <a class="el" href="../../d6/d60/classblaze_1_1HybridMatrix.html" title="Efficient implementation of a dynamically sized matrix with static memory.The HybridMatrix class temp...">blaze::HybridMatrix</a> is a suitable choice for small to medium matrices, whose dimensions are not known at compile time or not fixed at runtime, but whose maximum dimensions are known at compile time:</p>
<div class="fragment"><div class="line"><span class="comment">// Definition of a 3x4 integral row-major matrix with maximum dimensions of 6x8</span></div><div class="line"><a class="code" href="../../d6/d60/classblaze_1_1HybridMatrix.html">blaze::HybridMatrix&lt;int,6UL,8UL&gt;</a> A( 3UL, 4UL );</div><div class="line"></div><div class="line"><span class="comment">// Definition of a 4x6 single precision row-major matrix with maximum dimensions of 12x16</span></div><div class="line"><a class="code" href="../../d6/d60/classblaze_1_1HybridMatrix.html">blaze::HybridMatrix&lt;float,12UL,16UL,blaze::rowMajor&gt;</a> B( 4UL, 6UL );</div><div class="line"></div><div class="line"><span class="comment">// Definition of a 0x0 double precision column-major matrix and maximum dimensions of 6x6</span></div><div class="line"><a class="code" href="../../d6/d60/classblaze_1_1HybridMatrix.html">blaze::HybridMatrix&lt;double,6UL,6UL,blaze::columnMajor&gt;</a> C;</div></div><!-- fragment --><p><br />
 </p>
<h1><a class="anchor" id="matrix_types_custom_matrix"></a>
CustomMatrix</h1>
<hr/>
<p>The <a class="el" href="../../de/d43/classblaze_1_1CustomMatrix.html" title="Efficient implementation of a customizable matrix.The CustomMatrix class template provides the functi...">blaze::CustomMatrix</a> class template provides the functionality to represent an external array of elements of arbitrary type and a fixed size as a native <b>Blaze</b> dense matrix data structure. Thus in contrast to all other dense matrix types a custom matrix does not perform any kind of memory allocation by itself, but it is provided with an existing array of element during construction. A custom matrix can therefore be considered an alias to the existing array. It can be included via the header file</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="../../d4/d1a/CustomMatrix_8h.html">blaze/math/CustomMatrix.h</a>&gt;</span></div></div><!-- fragment --><p>The type of the elements, the properties of the given array of elements and the storage order of the matrix can be specified via the following four template parameters:</p>
<div class="fragment"><div class="line"><span class="keyword">template</span>&lt; <span class="keyword">typename</span> Type, <span class="keywordtype">bool</span> AF, <span class="keywordtype">bool</span> PF, <span class="keywordtype">bool</span> SO &gt;</div><div class="line"><span class="keyword">class </span>CustomMatrix;</div></div><!-- fragment --><ul>
<li>Type: specifies the type of the matrix elements. <a class="el" href="../../de/d43/classblaze_1_1CustomMatrix.html" title="Efficient implementation of a customizable matrix.The CustomMatrix class template provides the functi...">blaze::CustomMatrix</a> can be used with any non-cv-qualified, non-reference, non-pointer element type.</li>
<li>AF : specifies whether the represented, external arrays are properly aligned with respect to the available instruction set (SSE, AVX, ...) or not.</li>
<li>PF : specified whether the represented, external arrays are properly padded with respect to the available instruction set (SSE, AVX, ...) or not.</li>
<li>SO : specifies the storage order (<a class="el" href="../../d2/de9/namespaceblaze.html#a511878ce70095271b6d0dd5b855a9eaa" title="Storage order flag for row-major matrices. ">blaze::rowMajor</a>, <a class="el" href="../../d2/de9/namespaceblaze.html#a5e42e1508f7d4d364fe7c64eef78a583" title="Storage order flag for column-major matrices. ">blaze::columnMajor</a>) of the matrix. The default value is <a class="el" href="../../d2/de9/namespaceblaze.html#a511878ce70095271b6d0dd5b855a9eaa" title="Storage order flag for row-major matrices. ">blaze::rowMajor</a>.</li>
</ul>
<p>The <a class="el" href="../../de/d43/classblaze_1_1CustomMatrix.html" title="Efficient implementation of a customizable matrix.The CustomMatrix class template provides the functi...">blaze::CustomMatrix</a> is the right choice if any external array needs to be represented as a <b>Blaze</b> dense matrix data structure or if a custom memory allocation strategy needs to be realized:</p>
<div class="fragment"><div class="line"><span class="keyword">using</span> <a class="code" href="../../de/d43/classblaze_1_1CustomMatrix.html">blaze::CustomMatrix</a>;</div><div class="line"><span class="keyword">using</span> <a class="code" href="../../de/df1/group__math.html#ga30a412c45e10cff7eba4dacc999d55c7">blaze::aligned</a>;</div><div class="line"><span class="keyword">using</span> <a class="code" href="../../de/df1/group__math.html#ga9182d2466faf6f39bfc6a7cd2e5895a5">blaze::unaligned</a>;</div><div class="line"><span class="keyword">using</span> <a class="code" href="../../de/df1/group__math.html#ga5b4adba70768d85bb6e8f5c8c1250c56">blaze::padded</a>;</div><div class="line"><span class="keyword">using</span> <a class="code" href="../../de/df1/group__math.html#gaedc7ae55b6c72483aab8062ac750a2bc">blaze::unpadded</a>;</div><div class="line"></div><div class="line"><span class="comment">// Definition of an unmanaged 3x4 custom matrix for unaligned, unpadded integer arrays</span></div><div class="line"><span class="keyword">typedef</span> CustomMatrix&lt;int,unaligned,unpadded,rowMajor&gt;  UnalignedUnpadded;</div><div class="line">std::vector&lt;int&gt; vec( 12UL )</div><div class="line">UnalignedUnpadded A( &amp;vec[0], 3UL, 4UL );</div><div class="line"></div><div class="line"><span class="comment">// Definition of a managed 5x6 custom matrix for unaligned but padded &#39;float&#39; arrays</span></div><div class="line">typedef CustomMatrix&lt;<span class="keywordtype">float</span>,<a class="code" href="../../de/df1/group__math.html#ga9182d2466faf6f39bfc6a7cd2e5895a5">unaligned</a>,padded,<a class="code" href="../../d2/de9/namespaceblaze.html#a5e42e1508f7d4d364fe7c64eef78a583">columnMajor</a>&gt;  UnalignedPadded;</div><div class="line">UnalignedPadded B( new <span class="keywordtype">float</span>[40], 5UL, 6UL, 8UL, <a class="code" href="../../d2/de9/namespaceblaze.html">blaze</a>::ArrayDelete() );</div><div class="line"></div><div class="line"><span class="comment">// Definition of a managed 12x13 custom matrix for aligned, unpadded &#39;double&#39; arrays</span></div><div class="line">typedef CustomMatrix&lt;<span class="keywordtype">double</span>,aligned,<a class="code" href="../../de/df1/group__math.html#gaedc7ae55b6c72483aab8062ac750a2bc">unpadded</a>,<a class="code" href="../../d2/de9/namespaceblaze.html#a511878ce70095271b6d0dd5b855a9eaa">rowMajor</a>&gt;  AlignedUnpadded;</div><div class="line">AlignedUnpadded C( <a class="code" href="../../d2/de9/namespaceblaze.html">blaze</a>::<a class="code" href="../../d4/d3a/group__util.html#gaf1a0f267ad32bb5a074fa67bba6cb698">allocate</a>&lt;<span class="keywordtype">double</span>&gt;( 192UL ), 12UL, 13UL, 16UL, <a class="code" href="../../d2/de9/namespaceblaze.html">blaze</a>::Deallocate );</div><div class="line"></div><div class="line"><span class="comment">// Definition of a 7x14 custom matrix for aligned, padded &#39;complex&lt;double&gt;&#39; arrays</span></div><div class="line">typedef CustomMatrix&lt;complex&lt;<span class="keywordtype">double</span>&gt;,aligned,padded,<a class="code" href="../../d2/de9/namespaceblaze.html#a5e42e1508f7d4d364fe7c64eef78a583">columnMajor</a>&gt;  AlignedPadded;</div><div class="line">AlignedPadded D( <a class="code" href="../../d2/de9/namespaceblaze.html">blaze</a>::<a class="code" href="../../d4/d3a/group__util.html#gaf1a0f267ad32bb5a074fa67bba6cb698">allocate</a>&lt;<span class="keywordtype">double</span>&gt;( 112UL ), 7UL, 14UL, 16UL, <a class="code" href="../../d2/de9/namespaceblaze.html">blaze</a>::Deallocate() );</div></div><!-- fragment --><p>In comparison with the remaining <b>Blaze</b> dense matrix types <a class="el" href="../../de/d43/classblaze_1_1CustomMatrix.html" title="Efficient implementation of a customizable matrix.The CustomMatrix class template provides the functi...">blaze::CustomMatrix</a> has several special characteristics. All of these result from the fact that a custom matrix is not performing any kind of memory allocation, but instead is given an existing array of elements. The following sections discuss all of these characteristics:</p>
<ol type="1">
<li><b><a class="el" href="../../da/d37/matrix_types.html#matrix_types_custom_matrix_memory_management">Memory Management</a></b></li>
<li><b><a class="el" href="../../da/d37/matrix_types.html#matrix_types_custom_matrix_copy_operations">Copy Operations</a></b></li>
<li><b><a class="el" href="../../da/d37/matrix_types.html#matrix_types_custom_matrix_alignment">Alignment</a></b></li>
<li><b><a class="el" href="../../da/d37/matrix_types.html#matrix_types_custom_matrix_padding">Padding</a></b></li>
</ol>
<p><br />
 </p>
<h2><a class="anchor" id="matrix_types_custom_matrix_memory_management"></a>
Memory Management</h2>
<p>The <a class="el" href="../../de/d43/classblaze_1_1CustomMatrix.html" title="Efficient implementation of a customizable matrix.The CustomMatrix class template provides the functi...">blaze::CustomMatrix</a> class template acts as an adaptor for an existing array of elements. As such it provides everything that is required to use the array just like a native <b>Blaze</b> dense matrix data structure. However, this flexibility comes with the price that the user of a custom matrix is responsible for the resource management.</p>
<p>When constructing a custom matrix there are two choices: Either a user manually manages the array of elements outside the custom matrix, or alternatively passes the responsibility for the memory management to an instance of CustomMatrix. In the second case the CustomMatrix class employs shared ownership between all copies of the custom matrix, which reference the same array.</p>
<p>The following examples give an impression of several possible types of custom matrices:</p>
<div class="fragment"><div class="line"><span class="keyword">using</span> <a class="code" href="../../de/d43/classblaze_1_1CustomMatrix.html">blaze::CustomMatrix</a>;</div><div class="line"><span class="keyword">using</span> <a class="code" href="../../d0/d60/structblaze_1_1ArrayDelete.html">blaze::ArrayDelete</a>;</div><div class="line"><span class="keyword">using</span> <a class="code" href="../../db/dc0/structblaze_1_1Deallocate.html">blaze::Deallocate</a>;</div><div class="line"><span class="keyword">using</span> <a class="code" href="../../d4/d3a/group__util.html#gaf1a0f267ad32bb5a074fa67bba6cb698">blaze::allocate</a>;</div><div class="line"><span class="keyword">using</span> <a class="code" href="../../de/df1/group__math.html#ga30a412c45e10cff7eba4dacc999d55c7">blaze::aligned</a>;</div><div class="line"><span class="keyword">using</span> <a class="code" href="../../de/df1/group__math.html#ga9182d2466faf6f39bfc6a7cd2e5895a5">blaze::unaligned</a>;</div><div class="line"><span class="keyword">using</span> <a class="code" href="../../de/df1/group__math.html#ga5b4adba70768d85bb6e8f5c8c1250c56">blaze::padded</a>;</div><div class="line"><span class="keyword">using</span> <a class="code" href="../../de/df1/group__math.html#gaedc7ae55b6c72483aab8062ac750a2bc">blaze::unpadded</a>;</div><div class="line"><span class="keyword">using</span> <a class="code" href="../../d2/de9/namespaceblaze.html#a511878ce70095271b6d0dd5b855a9eaa">blaze::rowMajor</a>;</div><div class="line"><span class="keyword">using</span> <a class="code" href="../../d2/de9/namespaceblaze.html#a5e42e1508f7d4d364fe7c64eef78a583">blaze::columnMajor</a>;</div><div class="line"></div><div class="line"><span class="comment">// Definition of a 3x4 custom row-major matrix with unaligned, unpadded and externally</span></div><div class="line"><span class="comment">// managed integer array. Note that the std::vector must be guaranteed to outlive the</span></div><div class="line"><span class="comment">// custom matrix!</span></div><div class="line">std::vector&lt;int&gt; vec( 12UL );</div><div class="line">CustomMatrix&lt;int,unaligned,unpadded&gt; A( &amp;vec[0], 3UL, 4UL );</div><div class="line"></div><div class="line"><span class="comment">// Definition of a 3x4 custom row-major matrix for unaligned, unpadded integer arrays.</span></div><div class="line"><span class="comment">// The responsibility for the memory management is passed to the custom matrix by</span></div><div class="line"><span class="comment">// providing a deleter of type &#39;blaze::ArrayDelete&#39; that is used during the destruction</span></div><div class="line"><span class="comment">// of the custom matrix.</span></div><div class="line">CustomMatrix&lt;int,unaligned,unpadded,rowMajor&gt; B( <span class="keyword">new</span> <span class="keywordtype">int</span>[12], 3UL, 4UL, ArrayDelete() );</div><div class="line"></div><div class="line"><span class="comment">// Definition of a custom 8x12 matrix for an aligned and padded integer array of</span></div><div class="line"><span class="comment">// capacity 128 (including 8 padding elements per row). The memory management is passed</span></div><div class="line"><span class="comment">// to the custom matrix by providing a deleter of type &#39;blaze::Deallocate&#39;.</span></div><div class="line">CustomMatrix&lt;int,aligned,padded&gt; C( allocate&lt;int&gt;( 128UL ), 8UL, 12UL, 16UL, Deallocate() );</div></div><!-- fragment --><p>It is possible to pass any type of deleter to the constructor. The deleter is only required to provide a function call operator that can be passed the pointer to the managed array. As an example the following code snipped shows the implementation of two native <b>Blaze</b> deleters <a class="el" href="../../d0/d60/structblaze_1_1ArrayDelete.html" title="Array-delete policy class.The ArrayDelete policy functor class applies an array delete operation to t...">blaze::ArrayDelete</a> and <a class="el" href="../../db/dc0/structblaze_1_1Deallocate.html" title="Deallocate policy class.The Deallocate deletion policy is the according deletion policy for arrays al...">blaze::Deallocate</a>:</p>
<div class="fragment"><div class="line"><span class="keyword">namespace </span><a class="code" href="../../d2/de9/namespaceblaze.html">blaze</a> {</div><div class="line"></div><div class="line"><span class="keyword">struct </span>ArrayDelete</div><div class="line">{</div><div class="line">   <span class="keyword">template</span>&lt; <span class="keyword">typename</span> Type &gt;</div><div class="line">   <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="../../d0/d60/structblaze_1_1ArrayDelete.html#a9bd36e405272b1d3a39d5dd5c82b6838">operator()</a>( Type ptr )<span class="keyword"> const </span>{ boost::checked_array_delete( ptr ); }</div><div class="line">};</div><div class="line"></div><div class="line"><span class="keyword">struct </span>Deallocate</div><div class="line">{</div><div class="line">   <span class="keyword">template</span>&lt; <span class="keyword">typename</span> Type &gt;</div><div class="line">   <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="../../d0/d60/structblaze_1_1ArrayDelete.html#a9bd36e405272b1d3a39d5dd5c82b6838">operator()</a>( Type ptr )<span class="keyword"> const </span>{ <a class="code" href="../../d4/d3a/group__util.html#gacba35bf708a4ea62cdca2a4a18a24c4b">deallocate</a>( ptr ); }</div><div class="line">};</div><div class="line"></div><div class="line">} <span class="comment">// namespace blaze</span></div></div><!-- fragment --><p><br />
 </p>
<h2><a class="anchor" id="matrix_types_custom_matrix_copy_operations"></a>
Copy Operations</h2>
<p>As with all dense matrices it is possible to copy construct a custom matrix:</p>
<div class="fragment"><div class="line"><span class="keyword">using</span> <a class="code" href="../../de/d43/classblaze_1_1CustomMatrix.html">blaze::CustomMatrix</a>;</div><div class="line"><span class="keyword">using</span> <a class="code" href="../../de/df1/group__math.html#ga9182d2466faf6f39bfc6a7cd2e5895a5">blaze::unaligned</a>;</div><div class="line"><span class="keyword">using</span> <a class="code" href="../../de/df1/group__math.html#gaedc7ae55b6c72483aab8062ac750a2bc">blaze::unpadded</a>;</div><div class="line"></div><div class="line"><span class="keyword">typedef</span> CustomMatrix&lt;int,unaligned,unpadded&gt;  CustomType;</div><div class="line"></div><div class="line">std::vector&lt;int&gt; vec( 6UL, 10 );    <span class="comment">// Vector of 6 integers of the value 10</span></div><div class="line">CustomType A( &amp;vec[0], 2UL, 3UL );  <span class="comment">// Represent the std::vector as Blaze dense matrix</span></div><div class="line">a[1] = 20;                          <span class="comment">// Also modifies the std::vector</span></div><div class="line"></div><div class="line">CustomType B( a );  <span class="comment">// Creating a copy of vector a</span></div><div class="line">b[2] = 20;          <span class="comment">// Also affect matrix A and the std::vector</span></div></div><!-- fragment --><p>It is important to note that a custom matrix acts as a reference to the specified array. Thus the result of the copy constructor is a new custom matrix that is referencing and representing the same array as the original custom matrix. In case a deleter has been provided to the first custom matrix, both matrices share the responsibility to destroy the array when the last matrix goes out of scope.</p>
<p>In contrast to copy construction, just as with references, copy assignment does not change which array is referenced by the custom matrices, but modifies the values of the array:</p>
<div class="fragment"><div class="line">std::vector&lt;int&gt; vec2( 6UL, 4 );     <span class="comment">// Vector of 6 integers of the value 4</span></div><div class="line">CustomType C( &amp;vec2[0], 2UL, 3UL );  <span class="comment">// Represent the std::vector as Blaze dense matrix</span></div><div class="line"></div><div class="line">A = C;  <span class="comment">// Copy assignment: Set all values of matrix A and B to 4.</span></div></div><!-- fragment --><p><br />
 </p>
<h2><a class="anchor" id="matrix_types_custom_matrix_alignment"></a>
Alignment</h2>
<p>In case the custom matrix is specified as <code>aligned</code> the passed array must adhere to some alignment restrictions based on the alignment requirements of the used data type and the used instruction set (SSE, AVX, ...). The restriction applies to the first element of each row/column: In case of a row-major matrix the first element of each row must be properly aligned, in case of a column-major matrix the first element of each column must be properly aligned. For instance, if a row-major matrix is used and AVX is active the first element of each row must be 32-bit aligned:</p>
<div class="fragment"><div class="line"><span class="keyword">using</span> <a class="code" href="../../de/d43/classblaze_1_1CustomMatrix.html">blaze::CustomMatrix</a>;</div><div class="line"><span class="keyword">using</span> <a class="code" href="../../db/dc0/structblaze_1_1Deallocate.html">blaze::Deallocate</a>;</div><div class="line"><span class="keyword">using</span> <a class="code" href="../../de/df1/group__math.html#ga30a412c45e10cff7eba4dacc999d55c7">blaze::aligned</a>;</div><div class="line"><span class="keyword">using</span> <a class="code" href="../../de/df1/group__math.html#ga5b4adba70768d85bb6e8f5c8c1250c56">blaze::padded</a>;</div><div class="line"><span class="keyword">using</span> <a class="code" href="../../d2/de9/namespaceblaze.html#a511878ce70095271b6d0dd5b855a9eaa">blaze::rowMajor</a>;</div><div class="line"></div><div class="line"><span class="keywordtype">int</span>* array = blaze::allocate&lt;int&gt;( 40UL );  <span class="comment">// Is guaranteed to be 32-bit aligned</span></div><div class="line">CustomMatrix&lt;int,aligned,padded,rowMajor&gt; A( array, 5UL, 6UL, 8UL, Deallocate() );</div></div><!-- fragment --><p>In the example, the row-major matrix has six columns. However, since with AVX eight integer values are loaded together the matrix is padded with two additional elements. This guarantees that the first element of each row is 32-bit aligned. In case the alignment requirements are violated, a <code>std::invalid_argument</code> exception is thrown.</p>
<p><br />
 </p>
<h2><a class="anchor" id="matrix_types_custom_matrix_padding"></a>
Padding</h2>
<p>Adding padding elements to the end of each row/column can have a significant impact on the performance. For instance, assuming that AVX is available, then two aligned, padded, 3x3 double precision matrices can be added via three SIMD addition operations:</p>
<div class="fragment"><div class="line"><span class="keyword">using</span> <a class="code" href="../../de/d43/classblaze_1_1CustomMatrix.html">blaze::CustomMatrix</a>;</div><div class="line"><span class="keyword">using</span> <a class="code" href="../../db/dc0/structblaze_1_1Deallocate.html">blaze::Deallocate</a>;</div><div class="line"><span class="keyword">using</span> <a class="code" href="../../d4/d3a/group__util.html#gaf1a0f267ad32bb5a074fa67bba6cb698">blaze::allocate</a>;</div><div class="line"><span class="keyword">using</span> <a class="code" href="../../de/df1/group__math.html#ga30a412c45e10cff7eba4dacc999d55c7">blaze::aligned</a>;</div><div class="line"><span class="keyword">using</span> <a class="code" href="../../de/df1/group__math.html#ga5b4adba70768d85bb6e8f5c8c1250c56">blaze::padded</a>;</div><div class="line"></div><div class="line"><span class="keyword">typedef</span> CustomMatrix&lt;double,aligned,padded&gt;  CustomType;</div><div class="line"></div><div class="line"><span class="comment">// Creating padded custom 3x3 matrix with an additional padding element in each row</span></div><div class="line">CustomType A( allocate&lt;double&gt;( 12UL ), 3UL, 3UL, 4UL, Deallocate() );</div><div class="line">CustomType B( allocate&lt;double&gt;( 12UL ), 3UL, 3UL, 4UL, Deallocate() );</div><div class="line">CustomType C( allocate&lt;double&gt;( 12UL ), 3UL, 3UL, 4UL, Deallocate() );</div><div class="line"></div><div class="line"><span class="comment">// ... Initialization</span></div><div class="line"></div><div class="line">C = A + B;  <span class="comment">// AVX-based matrix addition</span></div></div><!-- fragment --><p>In this example, maximum performance is possible. However, in case no padding elements are inserted a scalar addition has to be used:</p>
<div class="fragment"><div class="line"><span class="keyword">using</span> <a class="code" href="../../de/d43/classblaze_1_1CustomMatrix.html">blaze::CustomMatrix</a>;</div><div class="line"><span class="keyword">using</span> <a class="code" href="../../db/dc0/structblaze_1_1Deallocate.html">blaze::Deallocate</a>;</div><div class="line"><span class="keyword">using</span> <a class="code" href="../../d4/d3a/group__util.html#gaf1a0f267ad32bb5a074fa67bba6cb698">blaze::allocate</a>;</div><div class="line"><span class="keyword">using</span> <a class="code" href="../../de/df1/group__math.html#ga30a412c45e10cff7eba4dacc999d55c7">blaze::aligned</a>;</div><div class="line"><span class="keyword">using</span> <a class="code" href="../../de/df1/group__math.html#gaedc7ae55b6c72483aab8062ac750a2bc">blaze::unpadded</a>;</div><div class="line"></div><div class="line"><span class="keyword">typedef</span> CustomMatrix&lt;double,aligned,unpadded&gt;  CustomType;</div><div class="line"></div><div class="line"><span class="comment">// Creating unpadded custom 3x3 matrix</span></div><div class="line">CustomType A( allocate&lt;double&gt;( 12UL ), 3UL, 3UL, 4UL, Deallocate() );</div><div class="line">CustomType B( allocate&lt;double&gt;( 12UL ), 3UL, 3UL, 4UL, Deallocate() );</div><div class="line">CustomType C( allocate&lt;double&gt;( 12UL ), 3UL, 3UL, 4UL, Deallocate() );</div><div class="line"></div><div class="line"><span class="comment">// ... Initialization</span></div><div class="line"></div><div class="line">C = A + B;  <span class="comment">// Scalar matrix addition</span></div></div><!-- fragment --><p>Note that the construction of padded and unpadded aligned matrices looks identical. However, in case of padded matrices, <b>Blaze</b> will zero initialize the padding element and use them in all computations in order to achieve maximum performance. In case of an unpadded matrix <b>Blaze</b> will ignore the elements with the downside that it is not possible to load a complete row to an AVX register, which makes it necessary to fall back to a scalar addition.</p>
<p>The number of padding elements is required to be sufficient with respect to the available instruction set: In case of an aligned padded custom matrix the added padding elements must guarantee that the total number of elements in each row/column is a multiple of the SIMD vector width. In case of an unaligned padded matrix the number of padding elements can be greater or equal the number of padding elements of an aligned padded custom matrix. In case the padding is insufficient with respect to the available instruction set, a <code>std::invalid_argument</code> exception is thrown.</p>
<p><br />
 </p>
<h1><a class="anchor" id="matrix_types_compressed_matrix"></a>
CompressedMatrix</h1>
<hr/>
<p>The <a class="el" href="../../da/d7a/classblaze_1_1CompressedMatrix.html" title="Efficient implementation of a  compressed matrix.The CompressedMatrix class template is the represent...">blaze::CompressedMatrix</a> class template is the representation of an arbitrary sized sparse matrix with <img class="formulaInl" alt="$ M \cdot N $" src="../../form_164.png"/> dynamically allocated elements of arbitrary type. It can be included via the header file</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="../../df/d99/CompressedMatrix_8h.html">blaze/math/CompressedMatrix.h</a>&gt;</span></div></div><!-- fragment --><p>The type of the elements and the storage order of the matrix can be specified via the two template parameters:</p>
<div class="fragment"><div class="line"><span class="keyword">template</span>&lt; <span class="keyword">typename</span> Type, <span class="keywordtype">bool</span> SO &gt;</div><div class="line"><span class="keyword">class </span>CompressedMatrix;</div></div><!-- fragment --><ul>
<li><code>Type:</code> specifies the type of the matrix elements. CompressedMatrix can be used with any non-cv-qualified, non-reference, non-pointer element type.</li>
<li><code>SO</code> : specifies the storage order (<a class="el" href="../../d2/de9/namespaceblaze.html#a511878ce70095271b6d0dd5b855a9eaa" title="Storage order flag for row-major matrices. ">blaze::rowMajor</a>, <a class="el" href="../../d2/de9/namespaceblaze.html#a5e42e1508f7d4d364fe7c64eef78a583" title="Storage order flag for column-major matrices. ">blaze::columnMajor</a>) of the matrix. The default value is <a class="el" href="../../d2/de9/namespaceblaze.html#a511878ce70095271b6d0dd5b855a9eaa" title="Storage order flag for row-major matrices. ">blaze::rowMajor</a>.</li>
</ul>
<p>The <a class="el" href="../../da/d7a/classblaze_1_1CompressedMatrix.html" title="Efficient implementation of a  compressed matrix.The CompressedMatrix class template is the represent...">blaze::CompressedMatrix</a> is the right choice for all kinds of sparse matrices:</p>
<div class="fragment"><div class="line"><span class="comment">// Definition of a 3x4 integral row-major matrix</span></div><div class="line"><a class="code" href="../../da/d7a/classblaze_1_1CompressedMatrix.html">blaze::CompressedMatrix&lt;int&gt;</a> A( 3UL, 4UL );</div><div class="line"></div><div class="line"><span class="comment">// Definition of a 4x6 single precision row-major matrix</span></div><div class="line"><a class="code" href="../../da/d7a/classblaze_1_1CompressedMatrix.html">blaze::CompressedMatrix&lt;float,blaze::rowMajor&gt;</a> B( 4UL, 6UL );</div><div class="line"></div><div class="line"><span class="comment">// Definition of a double precision column-major matrix with 0 rows and columns</span></div><div class="line"><a class="code" href="../../da/d7a/classblaze_1_1CompressedMatrix.html">blaze::CompressedMatrix&lt;double,blaze::columnMajor&gt;</a> C;</div></div><!-- fragment --><p><br />
 Previous: <a class="el" href="../../d8/d59/matrices.html">Matrices</a> &#160; &#160; Next: <a class="el" href="../../dc/d58/matrix_operations.html">Matrix Operations</a> </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Dec 8 2016 01:03:46 by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.12
</small></address>
</body>
</html>
